## ⭐ Milestone 3: Advanced Features & Persistence

**Goal:** Add favorites and data persistence

**Duration:** Days 7-9

**Learning Objectives:**
- Implement detail views
- Add data persistence (localStorage)
- Create interactive components
- Manage application state

### Deliverables Checklist
- [ ] Detail view page complete
- [ ] Favorites functionality working
- [ ] Data persists across sessions
- [ ] Interactive UI elements functional
- [ ] URL state synchronization

### Step-by-Step Instructions

#### Step 1: Create Detail View Component

Create `src/pages/DetailPage.jsx`:
- Fetch item by ID from URL params
- Display complete information
- Add action buttons (favorites, share)
- Handle loading and error states

#### Step 2: Implement Data Persistence

Create `src/hooks/useFavorites.js`:
```javascript
import { useState, useEffect } from 'react';

const STORAGE_KEY = 'favorites:v1';

export function useFavorites() {
  const [favorites, setFavorites] = useState(() => {
    const stored = localStorage.getItem(STORAGE_KEY);
    return stored ? JSON.parse(stored) : [];
  });

  useEffect(() => {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(favorites));
  }, [favorites]);

  const addFavorite = (item) => {
    setFavorites(prev => [...prev, { ...item, addedAt: Date.now() }]);
  };

  const removeFavorite = (id) => {
    setFavorites(prev => prev.filter(item => item.id !== id));
  };

  const isFavorite = (id) => {
    return favorites.some(item => item.id === id);
  };

  return { favorites, addFavorite, removeFavorite, isFavorite };
}
```

#### Step 3: Build Interactive Components

Create **FavoriteButton Component**:
- Toggle favorite status
- Visual feedback (heart icon)
- Accessible button with ARIA labels

#### Step 4: Add URL State Management

Use `useSearchParams` hook:
```javascript
const [searchParams, setSearchParams] = useSearchParams();

// Read from URL
const query = searchParams.get('q');

// Update URL
setSearchParams({ q: newQuery });
```

#### Step 5: Test Advanced Features

```bash
# Test:
# 1. Detail view shows complete information
# 2. favorites save and persist
# 3. URL reflects application state
# 4. Page refresh maintains state
```

### Common Issues & Solutions

**Issue:** Data doesn't persist after browser refresh
**Solution:** Check localStorage key naming and JSON serialization

**Issue:** URL state not updating
**Solution:** Use Next.js App Router hooks (useNavigate, useSearchParams)

### Resources
- [localStorage API Guide]
- [State Management Patterns]
- [URL State Synchronization]

### Success Criteria
✅ Detail views fully functional
✅ Persistence works across sessions
✅ Interactive elements responsive
✅ State management robust
